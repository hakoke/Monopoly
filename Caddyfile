{
	auto_https off
	admin off
}

:{$PORT:3000} {
	root * /app/docs
	encode gzip
	
	# Log all requests for debugging
	log {
		output stdout
		format console
		level INFO
	}
	
	# Redirect root to /Monopoly/ if files are in /Monopoly/ directory
	handle / {
		try_files {path} /Monopoly/index.html
		file_server
	}
	
	# Handle /Monopoly/ paths - serve files from /Monopoly/ directory
	handle_path /Monopoly/* {
		file_server
	}
	
	# Serve static files directly
	@staticFiles {
		path_regexp \.(html|css|js|json|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot|mp3|mp4|webm|pdf)$
	}
	handle @staticFiles {
		file_server
	}
	
	# For all other requests (SPA routes), serve index.html or /Monopoly/index.html
	handle {
		try_files {path} /Monopoly/index.html /index.html
		file_server
	}
}

