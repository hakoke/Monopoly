{
	auto_https off
	admin off
}

:{$PORT:3000} {
	root * /app/docs
	encode gzip
	
	# Log all requests for debugging
	log {
		output stdout
		format console
		level INFO
	}
	
	# Rewrite /Monopoly/assets/* requests to /assets/* (handles mismatched base paths)
	handle /Monopoly/assets/* {
		rewrite * /assets{path}
		file_server
	}
	
	# Serve all static files directly
	@staticFiles {
		path_regexp \.(html|css|js|json|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot|mp3|mp4|webm|pdf)$
	}
	handle @staticFiles {
		file_server
	}
	
	# For root and all SPA routes, serve index.html or /Monopoly/index.html
	handle {
		try_files /index.html /Monopoly/index.html
		file_server
	}
}

